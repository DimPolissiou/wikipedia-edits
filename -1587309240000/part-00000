{"title_page": "Ultrafilter", "text_new": "{{About|the mathematical concept|the physical device|ultrafiltration}}\n[[File:Filter vs ultrafilter.svg|thumb|The powerset lattice of the set {1,2,3,4}, with the [[upper set]] \u2191{1,4} colored dark green. It is a ''principal filter'', but not an ''ultrafilter'', as it can be extended to the larger nontrivial filter \u2191{1}, by including also the light green elements. Since \u2191{1} cannot be extended any further, it is an ultrafilter.]]\nIn the [[mathematics|mathematical]] field of [[set theory]], an '''ultrafilter''' on a given [[partially ordered set]] (poset) ''P'' is a certain subset of ''P,'' namely a [[maximal element|maximal]] [[Filter (mathematics)|filter]] on ''P'', that is, a [[proper filter]] on ''P'' that cannot be enlarged to a bigger proper filter on ''P''.\n\nIf ''X'' is an arbitrary set, its [[power set]] \u2118(''X''), ordered by [[set inclusion]], is always a [[Boolean algebra]] and hence a poset, and (ultra)filters on \u2118(''X'') are usually called \"(ultra)filters on ''X''\".<ref name=\"notation warning\" group=\"note\">If ''X'' happens to be partially ordered, too, particular care is needed to understand from the context whether an (ultra)filter on \u2118(''X'') or an (ultra)filter just on ''X'' is meant; both kinds of (ultra)filters are quite different. Some authors{{cn|date=July 2016}} use \"(ultra)filter\" ''of'' a partial ordered set\" vs. \"''on'' an arbitrary set\"; i.e. they write \"(ultra)filter on ''X''\" to abbreviate \"(ultra)filter of \u2118(''X'')\".<!---guessed from a sentence in section \"Types and existence of ultrafilters\" which is now commented-out---></ref> An ultrafilter on a set ''X'' may be considered as a [[finitely additive]] [[measure (mathematics)|measure]] on ''X.'' In this view, every subset of ''X'' is either considered \"[[Almost everywhere|almost everything]]\" (has measure 1) or \"almost nothing\" (has measure 0), depending on whether it belongs to the given ultrafilter or not.{{cn|date=July 2016}}\n\nUltrafilters have many applications in set theory, [[model theory]], and [[topology]].<ref name=\"Davey.Priestley.1990\">{{cite book|author=B.A. Davey and H.A. Priestley|title=Introduction to Lattices and Order|publisher=Cambridge University Press|year=1990|series=Cambridge Mathematical Textbooks}}</ref>{{rp|186}}\n\n==Ultrafilters on partial orders==\nIn [[order theory]], an '''ultrafilter''' is a [[subset]] of a [[partially ordered set]] that is [[maximal element|maximal]] among all [[proper filter]]s.  This implies that any filter that properly contains an ultrafilter has to be equal to the whole poset.\n\nFormally, if ''P'' is a set, partially ordered by (\u2264), then \n* a subset ''F'' of ''P'' is called a '''filter''' on ''P'' if\n** ''F'' is nonempty,\n** for every ''x'', ''y'' in ''F'', there is some element ''z'' in ''F'' such that ''z'' \u2264 ''x'' and ''z'' \u2264 ''y'', and\n** for every ''x'' in ''F'' and ''y'' in ''P'', ''x'' \u2264 ''y'' implies that ''y'' is in ''F'', too;\n* a [[proper subset]] ''U'' of ''P'' is called an '''ultrafilter''' on ''P'' if\n**''U'' is a filter on ''P'', and\n** there is no proper filter ''F'' on ''P'' that properly extends ''U'' (that is, such that ''U'' is a proper subset of ''F'').\n\n==Special case: ultrafilter on a Boolean algebra==\nAn important special case of the concept occurs if the considered poset is a [[Boolean algebra (structure)|Boolean algebra]].  In this case, ultrafilters are characterized by containing, for each element ''a'' of the Boolean algebra, exactly one of the elements ''a'' and \u00ac''a'' (the latter being the [[Boolean algebra#Nonmonotone laws|Boolean complement]] of ''a''):\n\nIf ''P'' is a Boolean algebra and ''F'' is a proper filter on ''P'', then the following statements are equivalent:\n# ''F'' is an ultrafilter on ''P'',\n# ''F'' is a [[prime filter]] on ''P'',\n# for each ''a'' in ''P'', either ''a'' is in ''F'' or (\u00ac''a'') is in ''F''.<ref name=\"Davey.Priestley.1990\"/>{{rp|186}}\nA proof of 1.&nbsp;\u21d4&nbsp;2. is also given in (Burris, Sankappanavar, 2012, Corollary 3.13, p.133).<ref name=\"Burris.Sankappanavar.2012\">{{cite book | url=http://www.math.uwaterloo.ca/~snburris/htdocs/UALG/univ-algebra2012.pdf | isbn=978-0-9880552-0-9 | author=Stanley N. Burris and H.P. Sankappanavar | title=A Course in Universal Algebra | year=2012 }}</ref>\n\nMoreover, ultrafilters on a Boolean algebra can be related to [[Boolean algebra (structure)#Ideals and filters|maximal ideals]] and [[Boolean algebra (structure)#Homomorphisms and isomorphisms|homomorphisms]] to the 2-element Boolean algebra {true, false} (also known as [[2-valued morphism]]s) as follows:\n*Given a homomorphism of a Boolean algebra onto {true, false}, the [[inverse image]] of \"true\" is an ultrafilter, and the inverse image of \"false\" is a maximal ideal.\n*Given a maximal ideal of a Boolean algebra, its complement is an ultrafilter, and there is a unique homomorphism onto {true, false} taking the maximal ideal to \"false\".\n*Given an ultrafilter on a Boolean algebra, its complement is a maximal ideal, and there is a unique homomorphism onto {true, false} taking the ultrafilter to \"true\".{{cn|date=July 2016}}\n\n==Special case: ultrafilter on the powerset of a set ==\nGiven an arbitrary set ''X'', its [[power set]] [[Weierstrass p|\u2118]](''X''), ordered by [[set inclusion]], is always a Boolean algebra; hence the results of the above section ''[[#Special case: Boolean algebra|Special case: Boolean algebra]]'' apply. An (ultra)filter on \u2118(''X'') is often called just an \"(ultra)filter on ''X''\".<ref name=\"notation warning\" group=note/> The above formal definitions can be particularized to the powerset case as follows:\n\nGiven an arbitrary set ''X'', an ultrafilter on \u2118(''X'') is a set ''U'' consisting of subsets of ''X'' such that:\n#The empty set is not an element of ''U''.\n#If ''A'' and ''B'' are subsets of ''X'', the set ''A'' is a subset of ''B'', and ''A'' is an element of ''U'', then ''B'' is also an element of ''U''.\n#If ''A'' and ''B'' are elements of ''U'', then so is the [[Intersection (set theory)|intersection]] of ''A'' and ''B''.\n#If ''A'' is a subset of ''X'', then either<ref name=\"exclusive or\" group=note>Properties 1 and 3 imply that ''A'' and {{nowrap|''X'' \\ ''A''}} cannot ''both'' be elements of ''U''.</ref> ''A'' or its relative complement ''X'' \\ ''A'' is an element of ''U''.\n\nA characterization is given by the following theorem.\nA proper filter ''U'' on \u2118(''X'') is an ultrafilter if any of the following conditions are true:\n#There is no proper filter ''F'' on \u2118(''X'') strictly [[Filter (mathematics)#Filter on a set|finer]] than ''U'', that is, ''U'' \u2286 ''F'' implies ''U'' = ''F''.\n#If a union ''A''&nbsp;\u222a&nbsp;''B'' is in ''U'', then ''A'' is in ''U'' or ''B'' is.\n#For each subset ''A'' of ''X'', either<ref name=\"exclusive or\" group=note/> ''A'' is in ''U'' or (''X'' \\ ''A'') is.\n\nThere are no ultrafilters on \u2118(''[[empty set|\u2205]]'').\n\nAnother way of looking at ultrafilters on a power set \u2118(''X'') is as follows: for a given ultrafilter ''U'' define a function ''m'' on \u2118(''X'') by setting ''m''(''A'') = 1 if ''A'' is an element of ''U'' and ''m''(''A'') = 0 otherwise. Such a function is called a [[2-valued morphism]]. Then ''m'' is [[finitely additive]], and hence a ''[[Content (measure theory)|content]]'' on \u2118(''X''), and every property of elements of ''X'' is either true [[almost everywhere]] or false almost everywhere. However, ''m'' is usually not ''countably additive'', and hence does not define a [[measure (mathematics)|measure]] in the usual sense.\n\nFor a filter ''F'' that is not an ultrafilter, one would say ''m''(''A'') = 1 if ''A''&nbsp;\u2208&nbsp;''F'' and ''m''(''A'') = 0 if ''X'' \\ ''A''&nbsp;\u2208&nbsp;''F'', leaving ''m'' undefined elsewhere.{{cn|date=July 2016}}{{clarify|reason=A function m can certainly be defined in that way. However, this is pointless unless such an m can be shown to have some useful properties (e.g. being a 'content'). They should be stated here.|date=July 2016}}\n\n=={{vanchor|Types and existence of ultrafilters|Types}}==\nThere are two very different types of ultrafilter: principal and free. A '''principal''' (or '''fixed''', or '''trivial''') ultrafilter is a filter containing a [[least element]]. Consequently, principal ultrafilters are of the form ''F''<sub>''a''</sub> = {''x'' | ''a'' \u2264 ''x''} for some (but not all) elements ''a'' of the given poset. In this case ''a'' is called the ''principal element'' of the ultrafilter. Any ultrafilter that is not principal is called a '''free''' (or '''non-principal''') ultrafilter.\n\nFor ultrafilters on a powerset \u2118(''S''), a principal ultrafilter consists of all subsets of ''S'' that contain a given element ''s'' of ''S''. Each ultrafilter on \u2118(''S'') that is also a [[principal filter]] is of this form.<ref name=\"Davey.Priestley.1990\"/>{{rp|187}} Therefore, an ultrafilter ''U'' on \u2118(''S'') is principal if and only if it contains a finite set.<ref group=note>To see the \"if\" direction: If {''s''<sub>1</sub>,...,''s''<sub>''n''</sub>} \u2208 ''U'', then {''s''<sub>1</sub>} \u2208 ''U'', or ..., or {''s''<sub>''n''</sub>} \u2208 ''U'' by induction on ''n'', using Nr.2 of the [[#Special case: ultrafilter on the powerset of a set|above]] characterization theorem. That is, some {''s''<sub>''i''</sub>} is the principal element of ''U''.</ref> If ''S'' is infinite, an ultrafilter ''U'' on \u2118(''S'') is hence non-principal if and only if it contains the [[Fr\u00e9chet filter]] of [[cofinite subset]]s of ''S''.<ref group=note>''U'' is non-principal iff it contains no finite set, i.e. (by Nr.3 of the [[#Special case: ultrafilter on the powerset of a set|above]] characterization theorem) iff it contains every cofinite set, i.e. every member of the Fr\u00e9chet filter.</ref>{{cn|date=July 2016}} If ''S'' is finite, each ultrafilter is principal.<ref name=\"Davey.Priestley.1990\"/>{{rp|187}}\n\nOne can show that every filter on a Boolean algebra (or more generally, any subset with the [[finite intersection property]]) is contained in an ultrafilter (see [[Ultrafilter lemma]]) and that free ultrafilters therefore exist, but the proofs involve the [[axiom of choice]] (AC) in the form of [[Zorn's lemma]]. On the other hand, the statement that every filter is contained in an ultrafilter does not imply AC. Indeed, it is equivalent to the [[Boolean prime ideal theorem]] (BPIT), a well-known intermediate point between the axioms of [[Zermelo\u2013Fraenkel set theory]] (ZF) and the ZF theory augmented by the axiom of choice (ZFC). In general, proofs involving the axiom of choice do not produce explicit examples of free ultrafilters, though it is possible to find explicit examples in some models of ZFC;  for example, [[Kurt G\u00f6del|G\u00f6del]] showed that this can be done in the [[constructible universe]] where one can write down an explicit global choice function.  <!---commented out: \"almost all\" is vague in absence of a measure, \"all UFs principal on finite sets\" has been said above---Nonetheless, almost all ultrafilters on the powerset of an infinite set are free. By contrast, every ultrafilter of a finite poset (or ''on'' a finite set) is principal, since any finite filter has a least element.---> In ZF without the axiom of choice, it is possible that every ultrafilter is principal.<ref name=\"Halbeisen2012\">{{cite book|author=L.J. Halbeisen|title=Combinatorial Set Theory|publisher=Springer|year=2012|series=Springer Monographs in Mathematics}}</ref>\n\n==Applications==\nUltrafilters on powersets are useful in [[topology]], especially in relation to [[Compact space|compact]] [[Hausdorff space|Hausdorff]] spaces, and in [[model theory]] in the construction of [[ultraproduct|ultraproducts and ultrapowers]]. Every ultrafilter on a compact Hausdorff space converges to exactly one point. Likewise, ultrafilters on Boolean algebras play a central role in [[Stone's representation theorem for Boolean algebras|Stone's representation theorem]].\n\nThe set ''G'' of all ultrafilters of a poset ''P'' can be topologized in a natural way, that is in fact closely related to the above-mentioned representation theorem. For any element ''a'' of ''P'', let ''D''<sub>''a''</sub> = {''U'' \u2208 ''G'' | ''a'' \u2208 ''U''}. This is most useful when ''P'' is again a Boolean algebra, since in this situation the set of all ''D''<sub>''a''</sub> is a base for a compact Hausdorff topology on ''G''. Especially, when considering the ultrafilters on a powerset \u2118(''S''), the resulting [[topological space]] is the [[Stone\u2013\u010cech compactification]] of a [[discrete space]] of cardinality |''S''|.\n\nThe [[ultraproduct]] construction in [[model theory]] uses ultrafilters to produce [[elementary extension]]s of structures. For example, in constructing [[hyperreal number]]s as an ultraproduct of the [[real numbers]], the [[domain of discourse]] is extended from real numbers to sequences of real numbers. This sequence space is regarded as a [[superset]] of the reals by identifying each real with the corresponding constant sequence. To extend the familiar functions and relations (e.g., + and <) from the reals to the hyperreals, the natural idea is to define them pointwise. But this would lose important logical properties of the reals; for example, pointwise < is not a total ordering. So instead the functions and relations are defined \"[[ultraproduct#Definition|pointwise modulo ''U'']]\", where ''U'' is an ultrafilter on the [[index set]] of the sequences; by [[\u0141o\u015b' theorem]], this preserves all properties of the reals that can be stated in [[first-order logic]]. If ''U'' is nonprincipal, then the extension thereby obtained is nontrivial.\n\nIn [[geometric group theory]], non-principal ultrafilters are used to define the [[ultralimit#Asymptotic cones|asymptotic cone]] of a group. This construction yields a rigorous way to consider ''looking at the group from infinity'', that is the large scale geometry of the group. Asymptotic cones are particular examples of [[ultralimit]]s of [[metric space]]s.\n\n[[G\u00f6del's ontological proof]] of God's existence uses as an axiom that the set of all \"positive properties\" is an ultrafilter.\n\nIn [[social choice theory]], non-principal ultrafilters are used to define a rule (called a ''social welfare function'') for aggregating the preferences of ''infinitely'' many individuals. Contrary to [[Arrow's impossibility theorem]] for ''finitely'' many individuals, such a rule satisfies the conditions (properties) that Arrow proposes\n(e.g., Kirman and Sondermann, 1972).<ref>{{Cite journal| last1 = Kirman | first1 = A.| last2 = Sondermann | first2 = D.| title = Arrow's theorem, many agents, and invisible dictators| journal = Journal of Economic Theory| volume = 5| issue = 2| pages = 267\u2013277| year = 1972| doi = 10.1016/0022-0531(72)90106-8}}</ref>\nMihara (1997,<ref name=mihara97>{{Cite journal | last1 = Mihara | first1 = H. R. | title = Arrow's Theorem and Turing computability | journal = Economic Theory | volume = 10 | issue = 2 | pages = 257\u2013276 | year = 1997 | postscript = Reprinted in K. V. Velupillai , S. Zambelli, and S. Kinsella, ed., Computable Economics, International Library of Critical Writings in Economics, Edward Elgar, 2011. | doi = 10.1007/s001990050157 | url = http://129.3.20.41/eps/pe/papers/9408/9408001.pdf | url-status = dead | archiveurl = https://web.archive.org/web/20110812013901/http://129.3.20.41/eps/pe/papers/9408/9408001.pdf | archivedate = 2011-08-12 | citeseerx = 10.1.1.200.520 }}</ref> 1999)<ref name=mihara99>{{Cite journal | last1 = Mihara | first1 = H. R.| title =  Arrow's theorem, countably many agents, and more visible invisible dictators | journal = Journal of Mathematical Economics | volume = 32 | issue = 3| pages = 267\u2013277 | year = 1999 | doi = 10.1016/S0304-4068(98)00061-5 | url=http://econpapers.repec.org/paper/wpawuwppe/9705001.htm| citeseerx = 10.1.1.199.1970}}</ref>\nshows, however, such rules are practically of limited interest to social scientists, since they are non-algorithmic or non-computable.\n\n== Completeness ==<!-- This section is linked from [[Martin measure]] -->\nThe '''completeness''' of an ultrafilter ''U'' on a powerset is the smallest [[Cardinal number|cardinal]] \u03ba such that there are \u03ba elements of ''U'' whose intersection is not in ''U''. The definition of an ultrafilter implies that the completeness of any powerset ultrafilter is at least [[Aleph-naught|<math>\\aleph_0</math>]]. An ultrafilter whose completeness is ''greater'' than <math>\\aleph_0</math>\u2014that is, the intersection of any countable collection of elements of ''U'' is still in ''U''\u2014is called '''countably complete''' or '''\u03c3-complete'''.\n\nThe completeness of a countably complete [[#Types and existence of ultrafilters|nonprincipal]] ultrafilter on a powerset is always a [[measurable cardinal]].{{cn|date=July 2016}}\n\n=={{vanchor|Ordering on ultrafilters|Ordering}}==\nThe '''Rudin\u2013Keisler ordering''' is a [[preorder]] on the class of powerset ultrafilters defined as follows: if ''U'' is an ultrafilter on \u2118(''X''), and ''V'' an ultrafilter on \u2118(''Y''), then ''V'' \u2264<sub>RK</sub> ''U'' if there exists a function ''f'': ''X'' \u2192 ''Y'' such that\n:''C'' \u2208 ''V'' \u21d4 ''f''<sup> -1</sup>[''C''] \u2208 ''U''\nfor every subset ''C'' of ''Y''.\n\nUltrafilters ''U'' and ''V'' are called '''Rudin\u2013Keisler equivalent''', denoted ''U'' \u2261<sub>RK</sub> ''V'', if there exist sets ''A'' \u2208 ''U'' and ''B'' \u2208 ''V'', and a [[bijection]] ''f'': ''A'' \u2192 ''B'' that satisfies the condition above. (If ''X'' and ''Y'' have the same cardinality, the definition can be simplified by fixing ''A'' = ''X'', ''B'' = ''Y''.)\n\nIt is known that \u2261<sub>RK</sub> is the [[kernel (set theory)|kernel]] of \u2264<sub>RK</sub>, i.e., that ''U'' \u2261<sub>RK</sub> ''V'' if and only if ''U'' \u2264<sub>RK</sub> ''V'' and ''V'' \u2264<sub>RK</sub> ''U''.<ref>Comfort&Negrepontis (1974), Corollary 9.3.</ref>\n\n==Ultrafilters on \u2118(''\u03c9'')==\nThere are several special properties that an ultrafilter on \u2118([[Ordinal number#Ordinals extend the natural numbers|''\u03c9'']]) may possess, which prove useful in various areas of set theory and topology.\n* A non-principal ultrafilter ''U'' is called a '''P-point''' (or '''weakly selective''') if for every [[partition of a set|partition]] { ''C''<sub>''n''</sub> | ''n''<''\u03c9'' } of ''\u03c9'' such that \u2200''n''<''\u03c9'': ''C''<sub>''n''</sub> \u2209 ''U'', there exists some ''A'' \u2208 ''U'' such that ''A'' \u2229 ''C''<sub>''n''</sub> is a finite set for each ''n''.\n* A non-principal ultrafilter ''U'' is called '''Ramsey''' (or '''selective''') if for every partition { ''C''<sub>''n''</sub> | ''n''<''\u03c9'' } of ''\u03c9'' such that \u2200''n''<''\u03c9'': ''C''<sub>''n''</sub> \u2209 ''U'', there exists some ''A'' \u2208 ''U'' such that ''A'' \u2229 ''C''<sub>''n''</sub> is a [[singleton set]] for each ''n''.\n\nIt is a trivial observation that all Ramsey ultrafilters are P-points. [[Walter Rudin]] proved that the [[continuum hypothesis]] implies the existence of Ramsey ultrafilters.<ref>{{Citation\n  | last = Rudin\n  | first =Walter\n  | authorlink = Walter Rudin\n  | title = Homogeneity problems in the theory of \u010cech compactifications\n  | journal = [[Duke Mathematical Journal]]\n  | volume = 23\n  | issue = 3| pages = 409\u2013419\n  | publisher = \n  | location = \n  | year = 1956\n  | url = \n  | issn = \n  | doi = 10.1215/S0012-7094-56-02337-7 \n  | hdl = 10338.dmlcz/101493\n  | hdl-access = free\n  }}\n</ref>\nIn fact, many hypotheses imply the existence of Ramsey ultrafilters, including [[Martin's axiom]]. [[Saharon Shelah]] later showed that it is consistent that there are no P-point ultrafilters.<ref>\n{{Citation\n  | last = Wimmers\n  | first = Edward\n  | authorlink = \n  | title = The Shelah P-point independence theorem \n  | journal = Israel Journal of Mathematics\n  | volume = 43\n  | issue = 1\n  | pages = 28\u201348\n  | date = March 1982\n  | issn = \n  | doi = 10.1007/BF02761683 \n  }}\n</ref> Therefore, the existence of these types of ultrafilters is [[independence (mathematical logic)|independent]] of [[ZFC]].\n\nP-points are called as such because they are topological [[P-point]]s in the usual topology of the space [[Stone\u2013\u010cech compactification|{{nowrap|\u03b2\u03c9 \\ \u03c9}}]] of non-principal ultrafilters. The name Ramsey comes from [[Ramsey's theorem]]. To see why, one can prove that an ultrafilter is Ramsey if and only if for every 2-coloring of [''\u03c9'']<sup>2</sup> there exists an element of the ultrafilter that has a homogeneous color.\n\nAn ultrafilter on \u2118(''\u03c9'') is Ramsey if and only if it is [[minimal element|minimal]] in the Rudin\u2013Keisler ordering of non-principal powerset ultrafilters.{{cn|date=July 2016}}\n\n==Monad structure==\n\nThe [[functor]] associating to any set ''X'' the set of ''U''(''X'') of all ultrafilters on ''X'' forms a [[monad (category theory)|monad]] called the [[ultrafilter monad]]. The unit map\n\n:<math>X \\to U(X)</math>\n\nsends any element ''x'' in ''X'' to the principal ultrafilter given by ''x''.\n\nThis monad admits a conceptual explanation as the [[codensity monad]] of the inclusion of the [[FinSet|category of finite sets]] into the [[category of sets|category of all sets]].<ref>{{Citation|arxiv=1209.3606|last1=Leinster|first1=Tom|title=Codensity and the ultrafilter monad|journal=Theory and Applications of Categories|volume=28|pages=332\u2013370|year=2013|bibcode=2012arXiv1209.3606L}}</ref>\n\n==See also==\n\n* [[Universal net]]\n\n==Notes==\n{{reflist|group=note}}\n\n==References==\n<references/>\n\n==Further reading==\n*{{Citation | last1=Comfort | first1=W. W. | title=Ultrafilters: some old and some new results | doi=10.1090/S0002-9904-1977-14316-4 | mr=0454893 | year=1977 | journal=[[Bulletin of the American Mathematical Society]] | issn=0002-9904 | volume=83 | issue=4 | pages=417\u2013455| doi-access=free }}\n*{{Citation | last1=Comfort | first1=W. W. | last2=Negrepontis | first2=S. | title=The theory of ultrafilters | publisher=[[Springer-Verlag]] | location=Berlin, New York | mr=0396267 | year=1974}}\n*{{nlab|title=Ultrafilter|id=ultrafilter}}\n\n[[Category:Order theory]]\n[[Category:Set families]]\n[[Category:Nonstandard analysis]]\n", "text_old": "{{About|the mathematical concept|the physical device|ultrafiltration}}\n[[File:Filter vs ultrafilter.svg|thumb|The powerset lattice of the set {1,2,3,4}, with the [[upper set]] \u2191{1,4} colored dark green. It is a ''principal filter'', but not an ''ultrafilter'', as it can be extended to the larger nontrivial filter \u2191{1}, by including also the light green elements. Since \u2191{1} cannot be extended any further, it is an ultrafilter.]]\nIn the [[mathematics|mathematical]] field of [[set theory]], an '''ultrafilter''' on a given [[partially ordered set]] (poset) ''P'' is a certain subset of ''P,'' namely a [[maximal element|maximal]] [[Filter (mathematics)|filter]] on ''P'', that is, a [[proper filter]] on ''P'' that cannot be enlarged to a bigger proper filter on ''P''.  \n\nIf ''X'' is an arbitrary set, its [[power set]] \u2118(''X''), ordered by [[set inclusion]], is always a [[Boolean algebra]] and hence a poset, and (ultra)filters on \u2118(''X'') are usually called \"(ultra)filters on ''X''\".<ref name=\"notation warning\" group=\"note\">If ''X'' happens to be partially ordered, too, particular care is needed to understand from the context whether an (ultra)filter on \u2118(''X'') or an (ultra)filter just on ''X'' is meant; both kinds of (ultra)filters are quite different. Some authors{{cn|date=July 2016}} use \"(ultra)filter\" ''of'' a partial ordered set\" vs. \"''on'' an arbitrary set\"; i.e. they write \"(ultra)filter on ''X''\" to abbreviate \"(ultra)filter of \u2118(''X'')\".<!---guessed from a sentence in section \"Types and existence of ultrafilters\" which is now commented-out---></ref> An ultrafilter on a set ''X'' may be considered as a [[finitely additive]] [[measure (mathematics)|measure]] on ''X.'' In this view, every subset of ''X'' is either considered \"[[Almost everywhere|almost everything]]\" (has measure 1) or \"almost nothing\" (has measure 0), depending on whether it belongs to the given ultrafilter or not.{{cn|date=July 2016}}\n\nUltrafilters have many applications in set theory, [[model theory]], and [[topology]].<ref name=\"Davey.Priestley.1990\">{{cite book|author=B.A. Davey and H.A. Priestley|title=Introduction to Lattices and Order|publisher=Cambridge University Press|year=1990|series=Cambridge Mathematical Textbooks}}</ref>{{rp|186}} \n\n==Ultrafilters on partial orders==\nIn [[order theory]], an '''ultrafilter''' is a [[subset]] of a [[partially ordered set]] that is [[maximal element|maximal]] among all [[proper filter]]s.  This implies that any filter that properly contains an ultrafilter has to be equal to the whole poset.\n\nFormally, if ''P'' is a set, partially ordered by (\u2264), then \n* a subset ''F'' of ''P'' is called a '''filter''' on ''P'' if\n** ''F'' is nonempty,\n** for every ''x'', ''y'' in ''F'', there is some element ''z'' in ''F'' such that ''z'' \u2264 ''x'' and ''z'' \u2264 ''y'', and\n** for every ''x'' in ''F'' and ''y'' in ''P'', ''x'' \u2264 ''y'' implies that ''y'' is in ''F'', too;\n* a [[proper subset]] ''U'' of ''P'' is called an '''ultrafilter''' on ''P'' if\n**''U'' is a filter on ''P'', and\n** there is no proper filter ''F'' on ''P'' that properly extends ''U'' (that is, such that ''U'' is a proper subset of ''F'').\n\n==Special case: ultrafilter on a Boolean algebra==\nAn important special case of the concept occurs if the considered poset is a [[Boolean algebra (structure)|Boolean algebra]].  In this case, ultrafilters are characterized by containing, for each element ''a'' of the Boolean algebra, exactly one of the elements ''a'' and \u00ac''a'' (the latter being the [[Boolean algebra#Nonmonotone laws|Boolean complement]] of ''a''):\n\nIf ''P'' is a Boolean algebra and ''F'' is a proper filter on ''P'', then the following statements are equivalent:\n# ''F'' is an ultrafilter on ''P'',\n# ''F'' is a [[prime filter]] on ''P'',\n# for each ''a'' in ''P'', either ''a'' is in ''F'' or (\u00ac''a'') is in ''F''.<ref name=\"Davey.Priestley.1990\"/>{{rp|186}}\nA proof of 1.&nbsp;\u21d4&nbsp;2. is also given in (Burris, Sankappanavar, 2012, Corollary 3.13, p.133).<ref name=\"Burris.Sankappanavar.2012\">{{cite book | url=http://www.math.uwaterloo.ca/~snburris/htdocs/UALG/univ-algebra2012.pdf | isbn=978-0-9880552-0-9 | author=Stanley N. Burris and H.P. Sankappanavar | title=A Course in Universal Algebra | year=2012 }}</ref>\n\nMoreover, ultrafilters on a Boolean algebra can be related to [[Boolean algebra (structure)#Ideals and filters|maximal ideals]] and [[Boolean algebra (structure)#Homomorphisms and isomorphisms|homomorphisms]] to the 2-element Boolean algebra {true, false} (also known as [[2-valued morphism]]s) as follows:\n*Given a homomorphism of a Boolean algebra onto {true, false}, the [[inverse image]] of \"true\" is an ultrafilter, and the inverse image of \"false\" is a maximal ideal.\n*Given a maximal ideal of a Boolean algebra, its complement is an ultrafilter, and there is a unique homomorphism onto {true, false} taking the maximal ideal to \"false\".\n*Given an ultrafilter on a Boolean algebra, its complement is a maximal ideal, and there is a unique homomorphism onto {true, false} taking the ultrafilter to \"true\".{{cn|date=July 2016}}\n\n==Special case: ultrafilter on the powerset of a set ==\nGiven an arbitrary set ''X'', its [[power set]] [[Weierstrass p|\u2118]](''X''), ordered by [[set inclusion]], is always a Boolean algebra; hence the results of the above section ''[[#Special case: Boolean algebra|Special case: Boolean algebra]]'' apply. An (ultra)filter on \u2118(''X'') is often called just an \"(ultra)filter on ''X''\".<ref name=\"notation warning\" group=note/> The above formal definitions can be particularized to the powerset case as follows:\n\nGiven an arbitrary set ''X'', an ultrafilter on \u2118(''X'') is a set ''U'' consisting of subsets of ''X'' such that:\n#The empty set is not an element of ''U''.\n#If ''A'' and ''B'' are subsets of ''X'', the set ''A'' is a subset of ''B'', and ''A'' is an element of ''U'', then ''B'' is also an element of ''U''.\n#If ''A'' and ''B'' are elements of ''U'', then so is the [[Intersection (set theory)|intersection]] of ''A'' and ''B''.\n#If ''A'' is a subset of ''X'', then either<ref name=\"exclusive or\" group=note>Properties 1 and 3 imply that ''A'' and {{nowrap|''X'' \\ ''A''}} cannot ''both'' be elements of ''U''.</ref> ''A'' or its relative complement ''X'' \\ ''A'' is an element of ''U''.\n\nA characterization is given by the following theorem.\nA proper filter ''U'' on \u2118(''X'') is an ultrafilter if any of the following conditions are true:\n#There is no proper filter ''F'' on \u2118(''X'') strictly [[Filter (mathematics)#Filter on a set|finer]] than ''U'', that is, ''U'' \u2286 ''F'' implies ''U'' = ''F''.\n#If a union ''A''&nbsp;\u222a&nbsp;''B'' is in ''U'', then ''A'' is in ''U'' or ''B'' is.\n#For each subset ''A'' of ''X'', either<ref name=\"exclusive or\" group=note/> ''A'' is in ''U'' or (''X'' \\ ''A'') is.\n\nThere are no ultrafilters on \u2118(''[[empty set|\u2205]]'').\n\nAnother way of looking at ultrafilters on a power set \u2118(''X'') is as follows: for a given ultrafilter ''U'' define a function ''m'' on \u2118(''X'') by setting ''m''(''A'') = 1 if ''A'' is an element of ''U'' and ''m''(''A'') = 0 otherwise. Such a function is called a [[2-valued morphism]]. Then ''m'' is [[finitely additive]], and hence a ''[[Content (measure theory)|content]]'' on \u2118(''X''), and every property of elements of ''X'' is either true [[almost everywhere]] or false almost everywhere. However, ''m'' is usually not ''countably additive'', and hence does not define a [[measure (mathematics)|measure]] in the usual sense.\n\nFor a filter ''F'' that is not an ultrafilter, one would say ''m''(''A'') = 1 if ''A''&nbsp;\u2208&nbsp;''F'' and ''m''(''A'') = 0 if ''X'' \\ ''A''&nbsp;\u2208&nbsp;''F'', leaving ''m'' undefined elsewhere.{{cn|date=July 2016}}{{clarify|reason=A function m can certainly be defined in that way. However, this is pointless unless such an m can be shown to have some useful properties (e.g. being a 'content'). They should be stated here.|date=July 2016}}\n\n=={{vanchor|Types and existence of ultrafilters|Types}}==\nThere are two very different types of ultrafilter: principal and free. A '''principal''' (or '''fixed''', or '''trivial''') ultrafilter is a filter containing a [[least element]]. Consequently, principal ultrafilters are of the form ''F''<sub>''a''</sub> = {''x'' | ''a'' \u2264 ''x''} for some (but not all) elements ''a'' of the given poset. In this case ''a'' is called the ''principal element'' of the ultrafilter. Any ultrafilter that is not principal is called a '''free''' (or '''non-principal''') ultrafilter. \n\nFor ultrafilters on a powerset \u2118(''S''), a principal ultrafilter consists of all subsets of ''S'' that contain a given element ''s'' of ''S''. Each ultrafilter on \u2118(''S'') that is also a [[principal filter]] is of this form.<ref name=\"Davey.Priestley.1990\"/>{{rp|187}} Therefore, an ultrafilter ''U'' on \u2118(''S'') is principal if and only if it contains a finite set.<ref group=note>To see the \"if\" direction: If {''s''<sub>1</sub>,...,''s''<sub>''n''</sub>} \u2208 ''U'', then {''s''<sub>1</sub>} \u2208 ''U'', or ..., or {''s''<sub>''n''</sub>} \u2208 ''U'' by induction on ''n'', using Nr.2 of the [[#Special case: ultrafilter on the powerset of a set|above]] characterization theorem. That is, some {''s''<sub>''i''</sub>} is the principal element of ''U''.</ref> If ''S'' is infinite, an ultrafilter ''U'' on \u2118(''S'') is hence non-principal if and only if it contains the [[Fr\u00e9chet filter]] of [[cofinite subset]]s of ''S''.<ref group=note>''U'' is non-principal iff it contains no finite set, i.e. (by Nr.3 of the [[#Special case: ultrafilter on the powerset of a set|above]] characterization theorem) iff it contains every cofinite set, i.e. every member of the Fr\u00e9chet filter.</ref>{{cn|date=July 2016}} If ''S'' is finite, each ultrafilter is principal.<ref name=\"Davey.Priestley.1990\"/>{{rp|187}}\n\nOne can show that every filter on a Boolean algebra (or more generally, any subset with the [[finite intersection property]]) is contained in an ultrafilter (see [[Ultrafilter lemma]]) and that free ultrafilters therefore exist, but the proofs involve the [[axiom of choice]] (AC) in the form of [[Zorn's lemma]]. On the other hand, the statement that every filter is contained in an ultrafilter does not imply AC. Indeed, it is equivalent to the [[Boolean prime ideal theorem]] (BPIT), a well-known intermediate point between the axioms of [[Zermelo\u2013Fraenkel set theory]] (ZF) and the ZF theory augmented by the axiom of choice (ZFC). In general, proofs involving the axiom of choice do not produce explicit examples of free ultrafilters, though it is possible to find explicit examples in some models of ZFC;  for example, [[Kurt G\u00f6del|G\u00f6del]] showed that this can be done in the [[constructible universe]] where one can write down an explicit global choice function.  <!---commented out: \"almost all\" is vague in absence of a measure, \"all UFs principal on finite sets\" has been said above---Nonetheless, almost all ultrafilters on the powerset of an infinite set are free. By contrast, every ultrafilter of a finite poset (or ''on'' a finite set) is principal, since any finite filter has a least element.---> In ZF without the axiom of choice, it is possible that every ultrafilter is principal. <ref name=\"Halbeisen2012>{{cite book|author=L.J. Halbeisen|title=Combinatorial Set Theory|publisher=Springer|year=2012|series=Springer Monographs in Mathematics}}</ref>\n\n==Applications==\nUltrafilters on powersets are useful in [[topology]], especially in relation to [[Compact space|compact]] [[Hausdorff space|Hausdorff]] spaces, and in [[model theory]] in the construction of [[ultraproduct|ultraproducts and ultrapowers]]. Every ultrafilter on a compact Hausdorff space converges to exactly one point. Likewise, ultrafilters on Boolean algebras play a central role in [[Stone's representation theorem for Boolean algebras|Stone's representation theorem]].\n\nThe set ''G'' of all ultrafilters of a poset ''P'' can be topologized in a natural way, that is in fact closely related to the above-mentioned representation theorem. For any element ''a'' of ''P'', let ''D''<sub>''a''</sub> = {''U'' \u2208 ''G'' | ''a'' \u2208 ''U''}. This is most useful when ''P'' is again a Boolean algebra, since in this situation the set of all ''D''<sub>''a''</sub> is a base for a compact Hausdorff topology on ''G''. Especially, when considering the ultrafilters on a powerset \u2118(''S''), the resulting [[topological space]] is the [[Stone\u2013\u010cech compactification]] of a [[discrete space]] of cardinality |''S''|.\n\nThe [[ultraproduct]] construction in [[model theory]] uses ultrafilters to produce [[elementary extension]]s of structures. For example, in constructing [[hyperreal number]]s as an ultraproduct of the [[real numbers]], the [[domain of discourse]] is extended from real numbers to sequences of real numbers. This sequence space is regarded as a [[superset]] of the reals by identifying each real with the corresponding constant sequence. To extend the familiar functions and relations (e.g., + and <) from the reals to the hyperreals, the natural idea is to define them pointwise. But this would lose important logical properties of the reals; for example, pointwise < is not a total ordering. So instead the functions and relations are defined \"[[ultraproduct#Definition|pointwise modulo ''U'']]\", where ''U'' is an ultrafilter on the [[index set]] of the sequences; by [[\u0141o\u015b' theorem]], this preserves all properties of the reals that can be stated in [[first-order logic]]. If ''U'' is nonprincipal, then the extension thereby obtained is nontrivial.\n\nIn [[geometric group theory]], non-principal ultrafilters are used to define the [[ultralimit#Asymptotic cones|asymptotic cone]] of a group. This construction yields a rigorous way to consider ''looking at the group from infinity'', that is the large scale geometry of the group. Asymptotic cones are particular examples of [[ultralimit]]s of [[metric space]]s.\n\n[[G\u00f6del's ontological proof]] of God's existence uses as an axiom that the set of all \"positive properties\" is an ultrafilter.\n\nIn [[social choice theory]], non-principal ultrafilters are used to define a rule (called a ''social welfare function'') for aggregating the preferences of ''infinitely'' many individuals. Contrary to [[Arrow's impossibility theorem]] for ''finitely'' many individuals, such a rule satisfies the conditions (properties) that Arrow proposes\n(e.g., Kirman and Sondermann, 1972).<ref>{{Cite journal| last1 = Kirman | first1 = A.| last2 = Sondermann | first2 = D.| title = Arrow's theorem, many agents, and invisible dictators| journal = Journal of Economic Theory| volume = 5| issue = 2| pages = 267\u2013277| year = 1972| doi = 10.1016/0022-0531(72)90106-8}}</ref>\nMihara (1997,<ref name=mihara97>{{Cite journal | last1 = Mihara | first1 = H. R. | title = Arrow's Theorem and Turing computability | journal = Economic Theory | volume = 10 | issue = 2 | pages = 257\u2013276 | year = 1997 | postscript = Reprinted in K. V. Velupillai , S. Zambelli, and S. Kinsella, ed., Computable Economics, International Library of Critical Writings in Economics, Edward Elgar, 2011. | doi = 10.1007/s001990050157 | url = http://129.3.20.41/eps/pe/papers/9408/9408001.pdf | url-status = dead | archiveurl = https://web.archive.org/web/20110812013901/http://129.3.20.41/eps/pe/papers/9408/9408001.pdf | archivedate = 2011-08-12 | citeseerx = 10.1.1.200.520 }}</ref> 1999)<ref name=mihara99>{{Cite journal | last1 = Mihara | first1 = H. R.| title =  Arrow's theorem, countably many agents, and more visible invisible dictators | journal = Journal of Mathematical Economics | volume = 32 | issue = 3| pages = 267\u2013277 | year = 1999 | doi = 10.1016/S0304-4068(98)00061-5 | url=http://econpapers.repec.org/paper/wpawuwppe/9705001.htm| citeseerx = 10.1.1.199.1970}}</ref>\nshows, however, such rules are practically of limited interest to social scientists, since they are non-algorithmic or non-computable.\n\n== Completeness ==<!-- This section is linked from [[Martin measure]] -->\nThe '''completeness''' of an ultrafilter ''U'' on a powerset is the smallest [[Cardinal number|cardinal]] \u03ba such that there are \u03ba elements of ''U'' whose intersection is not in ''U''. The definition of an ultrafilter implies that the completeness of any powerset ultrafilter is at least [[Aleph-naught|<math>\\aleph_0</math>]]. An ultrafilter whose completeness is ''greater'' than <math>\\aleph_0</math>\u2014that is, the intersection of any countable collection of elements of ''U'' is still in ''U''\u2014is called '''countably complete''' or '''\u03c3-complete'''.\n\nThe completeness of a countably complete [[#Types and existence of ultrafilters|nonprincipal]] ultrafilter on a powerset is always a [[measurable cardinal]].{{cn|date=July 2016}}\n\n=={{vanchor|Ordering on ultrafilters|Ordering}}==\nThe '''Rudin\u2013Keisler ordering''' is a [[preorder]] on the class of powerset ultrafilters defined as follows: if ''U'' is an ultrafilter on \u2118(''X''), and ''V'' an ultrafilter on \u2118(''Y''), then ''V'' \u2264<sub>RK</sub> ''U'' if there exists a function ''f'': ''X'' \u2192 ''Y'' such that\n:''C'' \u2208 ''V'' \u21d4 ''f''<sup> -1</sup>[''C''] \u2208 ''U''\nfor every subset ''C'' of ''Y''.\n\nUltrafilters ''U'' and ''V'' are called '''Rudin\u2013Keisler equivalent''', denoted ''U'' \u2261<sub>RK</sub> ''V'', if there exist sets ''A'' \u2208 ''U'' and ''B'' \u2208 ''V'', and a [[bijection]] ''f'': ''A'' \u2192 ''B'' that satisfies the condition above. (If ''X'' and ''Y'' have the same cardinality, the definition can be simplified by fixing ''A'' = ''X'', ''B'' = ''Y''.)\n\nIt is known that \u2261<sub>RK</sub> is the [[kernel (set theory)|kernel]] of \u2264<sub>RK</sub>, i.e., that ''U'' \u2261<sub>RK</sub> ''V'' if and only if ''U'' \u2264<sub>RK</sub> ''V'' and ''V'' \u2264<sub>RK</sub> ''U''.<ref>Comfort&Negrepontis (1974), Corollary 9.3.</ref>\n\n==Ultrafilters on \u2118(''\u03c9'')==\nThere are several special properties that an ultrafilter on \u2118([[Ordinal number#Ordinals extend the natural numbers|''\u03c9'']]) may possess, which prove useful in various areas of set theory and topology.\n* A non-principal ultrafilter ''U'' is called a '''P-point''' (or '''weakly selective''') if for every [[partition of a set|partition]] { ''C''<sub>''n''</sub> | ''n''<''\u03c9'' } of ''\u03c9'' such that \u2200''n''<''\u03c9'': ''C''<sub>''n''</sub> \u2209 ''U'', there exists some ''A'' \u2208 ''U'' such that ''A'' \u2229 ''C''<sub>''n''</sub> is a finite set for each ''n''.\n* A non-principal ultrafilter ''U'' is called '''Ramsey''' (or '''selective''') if for every partition { ''C''<sub>''n''</sub> | ''n''<''\u03c9'' } of ''\u03c9'' such that \u2200''n''<''\u03c9'': ''C''<sub>''n''</sub> \u2209 ''U'', there exists some ''A'' \u2208 ''U'' such that ''A'' \u2229 ''C''<sub>''n''</sub> is a [[singleton set]] for each ''n''.\n\nIt is a trivial observation that all Ramsey ultrafilters are P-points. [[Walter Rudin]] proved that the [[continuum hypothesis]] implies the existence of Ramsey ultrafilters.<ref>{{Citation\n  | last = Rudin\n  | first =Walter\n  | authorlink = Walter Rudin\n  | title = Homogeneity problems in the theory of \u010cech compactifications\n  | journal = [[Duke Mathematical Journal]]\n  | volume = 23\n  | issue = 3| pages = 409\u2013419\n  | publisher = \n  | location = \n  | year = 1956\n  | url = \n  | issn = \n  | doi = 10.1215/S0012-7094-56-02337-7 \n  | hdl = 10338.dmlcz/101493\n  | hdl-access = free\n  }}\n</ref>\nIn fact, many hypotheses imply the existence of Ramsey ultrafilters, including [[Martin's axiom]]. [[Saharon Shelah]] later showed that it is consistent that there are no P-point ultrafilters.<ref>\n{{Citation\n  | last = Wimmers\n  | first = Edward\n  | authorlink = \n  | title = The Shelah P-point independence theorem \n  | journal = Israel Journal of Mathematics\n  | volume = 43\n  | issue = 1\n  | pages = 28\u201348\n  | date = March 1982\n  | issn = \n  | doi = 10.1007/BF02761683 \n  }}\n</ref> Therefore, the existence of these types of ultrafilters is [[independence (mathematical logic)|independent]] of [[ZFC]].\n\nP-points are called as such because they are topological [[P-point]]s in the usual topology of the space [[Stone\u2013\u010cech compactification|{{nowrap|\u03b2\u03c9 \\ \u03c9}}]] of non-principal ultrafilters. The name Ramsey comes from [[Ramsey's theorem]]. To see why, one can prove that an ultrafilter is Ramsey if and only if for every 2-coloring of [''\u03c9'']<sup>2</sup> there exists an element of the ultrafilter that has a homogeneous color.\n\nAn ultrafilter on \u2118(''\u03c9'') is Ramsey if and only if it is [[minimal element|minimal]] in the Rudin\u2013Keisler ordering of non-principal powerset ultrafilters.{{cn|date=July 2016}}\n\n==Monad structure==\n\nThe [[functor]] associating to any set ''X'' the set of ''U''(''X'') of all ultrafilters on ''X'' forms a [[monad (category theory)|monad]] called the [[ultrafilter monad]]. The unit map\n\n:<math>X \\to U(X)</math>\n\nsends any element ''x'' in ''X'' to the principal ultrafilter given by ''x''.\n\nThis monad admits a conceptual explanation as the [[codensity monad]] of the inclusion of the [[FinSet|category of finite sets]] into the [[category of sets|category of all sets]].<ref>{{Citation|arxiv=1209.3606|last1=Leinster|first1=Tom|title=Codensity and the ultrafilter monad|journal=Theory and Applications of Categories|volume=28|pages=332\u2013370|year=2013|bibcode=2012arXiv1209.3606L}}</ref>\n\n==See also==\n\n* [[Universal net]]\n\n==Notes==\n{{reflist|group=note}}\n\n==References==\n<references/>\n\n==Further reading==\n*{{Citation | last1=Comfort | first1=W. W. | title=Ultrafilters: some old and some new results | doi=10.1090/S0002-9904-1977-14316-4 | mr=0454893 | year=1977 | journal=[[Bulletin of the American Mathematical Society]] | issn=0002-9904 | volume=83 | issue=4 | pages=417\u2013455| doi-access=free }}\n*{{Citation | last1=Comfort | first1=W. W. | last2=Negrepontis | first2=S. | title=The theory of ultrafilters | publisher=[[Springer-Verlag]] | location=Berlin, New York | mr=0396267 | year=1974}}\n*{{nlab|title=Ultrafilter|id=ultrafilter}}\n\n[[Category:Order theory]]\n[[Category:Set families]]\n[[Category:Nonstandard analysis]]\n", "name_user": "G\u00fcnniX", "label": "safe", "comment": "ref name fixedWP:REFNAME", "url_page": "//en.wikipedia.org/wiki/Ultrafilter"}
